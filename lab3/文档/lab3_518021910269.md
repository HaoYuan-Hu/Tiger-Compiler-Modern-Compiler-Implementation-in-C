# Lab3

## 概要

**我的程序中所遇到的 shift reduce conflict 有以下三个：**

![SRconflicts](C:\Users\荣耀\Desktop\编译原理\lab\lab3\文档\lab3_518021910269.assets\SRconflicts.png)

**下面我们逐一分析其出现的原因和无害的理由。**

## State 1 conflicts

State 1 对应的 y.output 如下所示：

![State1](C:\Users\荣耀\Desktop\编译原理\lab\lab3\文档\lab3_518021910269.assets\State1.png)

对于 State 1 来说，在遇到左方括号 LBRACK（即 “[” ） 时，

可以根据 lvalue -> ID · 进行 reduce 操作，

也可以根据 lvalue -> ID · LBRACK exp RBRACK 进行 shift 操作，

 这里我们进行了 reduce 操作。



在 tiger.y 中，我们对句法定义如下：

![lvalue](C:\Users\荣耀\Desktop\编译原理\lab\lab3\文档\lab3_518021910269.assets\lvalue.png)

此时进行 reduce 操作，我们将 ID 变成了 lvalue，

但之后仍可以根据 lvalue -> lvalue LBRACK exp RBRACK 进行 Parse，从而 reduce 到 lvalue；

这个结果和直接进行几次 shift 操作，根据 lvalue -> ID LBRACK exp RBRACK，reduce 到 lvalue 的结果是相同的。

所以 State 1 的 shift reduce conflict 是无害的。



## State 28 conflicts

State 28 对应的 y.output 如下所示：

![State28](C:\Users\荣耀\Desktop\编译原理\lab\lab3\文档\lab3_518021910269.assets\State28.png)

对于 State 28 来说，在遇到类型声明 TYPE 时，

可以根据 tydecs -> tydec · 进行 reduce 操作，

也可以根据 tydecs -> tydec · tydecs 进行 shift 操作，

 这里我们进行了 reduce 操作。



在 tiger.y 中，我们对句法定义如下：

![tydecs](C:\Users\荣耀\Desktop\编译原理\lab\lab3\文档\lab3_518021910269.assets\tydecs.png)

此时进行 reduce 操作，我们将 tydec 变成了 tydecs，

这个结果和直接进行 shift 操作，根据  tydecs -> tydec tydecs，reduce 到 tydecs 的结果是相同的。

所以 State 28 的 shift reduce conflict 是无害的。



## State 31 conflicts

State 31 对应的 y.output 如下所示：

![State31](C:\Users\荣耀\Desktop\编译原理\lab\lab3\文档\lab3_518021910269.assets\State31.png)

对于 State 31 来说，在遇到函数声明 FUNCTION 时，

可以根据 fundecs -> fundec · 进行 reduce 操作，

也可以根据 fundecs -> fundec · fundecs 进行 shift 操作，



在 tiger.y 中，我们对句法定义如下：

![fundecs](C:\Users\荣耀\Desktop\编译原理\lab\lab3\文档\lab3_518021910269.assets\fundecs.png)

此时进行 reduce 操作，我们将 fundec 变成了 fundecs，

这个结果和直接进行 shift 操作，根据 fundecs -> fundec fundecs，reduce 到 fundecs 的结果是相同的。

所以 State 31 的 shift reduce conflict 是无害的。

